
---

# 部落冲突（国际服）自动化辅助工具（技术研究版）

`coc_robot` 是一个基于 Python 的自动化辅助程序框架，旨在作为技术研究和自动化操作示范。项目源自对《部落冲突》（国际服）操作流程的技术模拟与识别研究，采用模块化设计，方便学习与扩展。

> **声明：本项目仅供学习和技术研究，禁止用于任何实际游戏作弊或商业用途。
> 相关游戏版权归 Supercell 所有，本项目不含任何修改、破解或作弊代码。**

---

## 主要功能（技术演示性质）

* 利用 WinAPI 模拟鼠标键盘操作，演示自动化控制技术
* 基于 YOLO 图像识别算法，展示游戏界面元素识别方法
* 简单的操作逻辑示范，如自动点击、兵种配置模拟
* 多账号演示及日志管理（仅为演示多线程操作）
* 反检测技术探索，模拟部分非机械操作行为

---

## 详细使用步骤

### 1. 安装雷电模拟器并配置
* 确保 Windows 系统设置中，显示缩放比例设置为 **100%**，
* 从[雷电模拟器官网](https://www.ldmnq.com/)下载并安装雷电模拟器
* 在模拟器设置中，将分辨率调整为 **800×600**
* 设置 DPI 为 **160**
* 关闭所有可能影响图像显示的滤镜插件，如 MSI Afterburner、NVIDIA 滤镜等

### 2. 安装并启动《部落冲突》国际服

* 在雷电模拟器内安装[《部落冲突》（国际服）](https://clashpost.com/apk)客户端
* 启动游戏并登录账号
* 进入游戏“主世界”，保持游戏默认皮肤和背景，避免影响图像识别效果

### 3. 游戏内兵种配置

程序会自动识别并部署你在游戏中配置的兵种，支持多种兵种混合配置。

#### 支持的兵种类型

**普通兵种**
> 野蛮人、弓箭手、巨人、哥布林、气球兵、法师、炸弹人、飞龙、皮卡超人、矿工、飞龙宝宝、野猪骑士、女巫、天使、天狗、雷龙、大雪怪、龙骑士、战神、根蔓骑士、蓝胖

**超级兵种**
> 超级野蛮人、超级飞龙、超级哥布林、收债哥布林

**活动/赛季兵种**
> 扫帚女巫、蛮羊骑士、戈仑冰人、寒冰亡灵、攻城气球、石头人、苍蝇

**英雄**
> 野蛮人之王、弓箭女皇、大守护者、飞盾战神、亡灵王子

#### 配置说明

* 在游戏训练营中配置你想要的兵种组合，程序会按顺序自动识别并部署
* 程序采用"打鱼"策略，优先攻击靠近地图边缘的资源建筑（金矿、圣水采集器）
* 如果某个兵种不在上述支持列表中，程序会自动跳过

#### 夜世界

* 若需要进行夜世界操作，请切换至夜世界页面
* 夜世界目前仅支持单一兵种配置

### 4. 法术配置与自动释放

程序支持自动识别并释放配置的法术，分为两类：

#### 镜像法术
* 如果在游戏中配置了镜像法术，程序会在所有兵种下完后自动释放
* 释放位置为最后下兵的位置（记录最后3个下兵点，随机选择）
* 建议高本玩家使用，可以复制高价值兵种

#### 乱生效类法术
程序会自动检测并循环释放以下法术（如果已配置）：
* 图腾法术
* 地震法术
* 蝙蝠法术
* 闪电法术
* 骷髅法术

这些法术会在预设的地图坐标点随机释放，直到全部用完。

> **提示**：如果不想使用某种法术，只需在游戏配兵时不配置该法术即可。程序会自动识别当前可用的法术。

### 5. 安装并启动辅助程序
* 打开[git](https://git-scm.com/)官网，下载安装包，无脑下一步
* 打开[python官网](https://www.python.org/downloads/release/python-3109/)下载Python 3.10.9（辅助开发时使用的py版本，其它版本可能依赖出错），安装，并添加环境变量。
* 使用命令行执行以下命令：

  ```bash
  git clone https://github.com/qilishidai/coc_robot.git
  cd coc_robot
  pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
  python UI入口.py
  ```
* 后续启动则只需要双击`UI入口.py`即可打开，无需再次执行上述命令
* 后续脚本更新，先在`UI入口.py`所在目录打开cmd命令行，然后执行`git pull`即可自动更新
* 确保辅助程序和模拟器运行权限一致，建议均以普通用户身份启动，避免权限冲突
* 如果第一行命令报网络错误，请自行百度git加速服务

### 6. 启动辅助操作

* 打开辅助程序界面
* 在程序界面左侧机器人列表中选择需要启动的机器人
* 若首次使用，可点击模拟器列表空白区域，进入配置页面，填写账号和相关参数
* 点击“启动”按钮开始自动化操作

### 7. 多账号及多实例支持

* 本程序支持在同一台电脑上同时运行多个模拟器实例，实现多账号自动化管理
* 在程序界面可分别控制各个实例的启动与停止

---
## 高级用户（命令行启动 & 自动挂机）
如果你已经熟悉本程序，并希望实现每日自动挂机、无人值守，可以参考[每日自动挂机](每日自动挂机.md)

* 如何通过 BAT 文件启动机器人
* 如何设置 Windows 计划任务实现每日自动挂机
* 如何同时启动多个机器人

看完这个文档，你就能轻松上手，无需理解太多技术细节。


---
### 注意事项

* ~启动模拟器前，请务必确保 Windows 缩放比例为 100%~（目前程序内部已自动处理）
* 模拟器内请关闭所有滤镜插件，以防止图像识别失效


---



## 更新记录

详见[项目提交历史](https://github.com/qilishidai/coc_robot/commits/main)

---





## 免责声明

* 本项目代码仅供学习研究，作者不对因使用本项目产生的任何直接或间接损失承担责任。用户使用时应遵守相关法律法规及游戏运营方的用户协议。
* 本项目仅为技术研究演示，禁止用于违反游戏运营商规则的用途
* 请勿使用本项目进行任何违反游戏用户协议的行为，避免账号风险。
* 请勿通过QQ群传播违规操作指导，作者不负任何责任.
* 本项目不保证任何功能的稳定性或安全性，使用风险由用户自行承担
* 本项目与 Supercell 没有任何关联，Supercell 对此不提供任何赞助或具体许可，也不对此承担任何责任。若要查看更多信息，请参阅 Supercell 玩家内容条款： www.supercell.com/en/fan-content-policy

---
